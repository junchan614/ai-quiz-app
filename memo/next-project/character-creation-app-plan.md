# キャラクター創作SNSアプリ - プロジェクト詳細計画

## 📋 プロジェクト概要

**プロジェクト名**: キャラクター設定共有SNS
**目的**: 最終目標「ストーリー創作補助ツール」への技術基盤構築
**位置づけ**: PostgreSQL + SNS機能 + API連携の習得プロジェクト

## 🎯 プロジェクトビジョン

### 核心コンセプト
**「友達と妄想を膨らませるように、AIとチャットしながらキャラクター設定を作り上げる」**

- ユーザーはAIと自然な会話でキャラクター設定を構築
- 4択選択肢（王道2 + ギャップ萌え1 + パーソナライズ1）で導線設計
- 完成した設定からAI画像生成 → SNS共有

### 最終目標への接続性
```
今回習得技術 → 最終目標での活用
├── PostgreSQL → 複雑な世界設定データベース
├── SNS機能 → 創作者コミュニティプラットフォーム
├── AI画像生成 → 設定の視覚化
├── キャラ設定DB → ストーリー要素の基盤
└── チャット型UI → 物語創作支援インターフェース
```

## 🛠️ 技術スタック

### フロントエンド
- **基本**: HTML + CSS + バニラJS（今回の経験活用）
- **新要素**: チャット型UI、選択肢ボタン、画像アップロード機能

### バックエンド
- **フレームワーク**: Express.js（継続活用）
- **データベース**: **PostgreSQL**（新習得・重要）
- **認証**: JWT（今回の経験活用）
- **新API**: Twitter API、画像生成API

### 外部連携
- **AI**: OpenAI API（GPT-4o for チャット、DALL-E for 画像生成）
- **SNS**: Twitter API（投稿・共有機能）
- **画像**: Cloudinary等（画像ストレージ）

## 📊 データベース設計思想

### PostgreSQL選択理由
- **容量**: ユーザーあたり大量のキャラクターデータ
- **同時接続**: 複数ユーザーの同時利用
- **リレーション**: 複雑な関係性データの管理
- **JSON型**: 柔軟なキャラクター属性の格納

### 主要テーブル設計
```sql
-- ユーザーテーブル
users (
    id, username, email, password_hash, 
    created_at, preferences_json
)

-- キャラクターテーブル
characters (
    id, user_id, name, basic_info_json,
    personality_json, background_json, abilities_json,
    ai_generated_image_url, created_at, updated_at,
    is_public, likes_count, views_count
)

-- チャット履歴テーブル（重要！）
chat_sessions (
    id, character_id, session_data_json,
    created_at, completed_at
)

-- チャット詳細テーブル
chat_messages (
    id, session_id, message_type, -- 'user', 'ai', 'choices'
    content, choices_json, extracted_data_json,
    timestamp
)

-- SNS機能テーブル
character_likes (user_id, character_id, created_at)
character_comments (id, character_id, user_id, content, created_at)
character_shares (id, character_id, platform, shared_url, created_at)

-- ユーザー嗜好学習テーブル
user_preferences (
    user_id, preference_category, preference_value,
    frequency, last_selected
)
```

## 🎭 核心機能：AIチャット型設定生成

### 会話フロー設計
```
1. 基本情報収集フェーズ
   ├── 名前・年齢・性別
   ├── 基本的な性格
   └── 見た目の特徴

2. 詳細設定フェーズ  
   ├── 性格の深掘り（ギャップ要素含む）
   ├── 背景・過去の出来事
   ├── 能力・特技・苦手なこと
   └── 人間関係・価値観

3. 設定確認・補完フェーズ
   ├── 矛盾点のチェック
   ├── 追加したい要素の確認
   └── 画像生成用プロンプトの最適化
```

### 選択肢生成ロジック
```javascript
const generateChoices = async (context, userHistory) => {
  // 4つの選択肢生成
  const choices = {
    royal1: generateRoyalChoice(context, 1),      // 王道パターン1
    royal2: generateRoyalChoice(context, 2),      // 王道パターン2  
    gap: generateGapMoeChoice(context),           // ギャップ萌え
    personal: generatePersonalizedChoice(context, userHistory) // パーソナライズ
  };
  
  return choices;
};

const generateGapMoeChoice = (context) => {
  // ギャップ萌え要素の生成
  // - 見た目と性格の対比
  // - 得意と苦手の対比
  // - 普段と特定状況での対比
  // - 立場と本音の対比
};
```

### AI友達ペルソナ設定
```
システムプロンプト:
「あなたは創作好きの親友です。ユーザーのキャラクター設定を一緒に作り上げる楽しい時間を提供してください。

特徴:
- 自然な相槌・感嘆詞を多用（「わかる〜！」「それいいね！」）
- 共感的で興味深そうな反応
- 新しい角度からの質問で設定を深掘り
- ときどき関連する面白い設定を提案
- ギャップ萌え要素を自然に引き出す

会話例:
User: 「人見知りです」
AI: 「あー、そういう子いるよね！でも人見知りの子って、心を開いた時のギャップがすごく魅力的だったりしない？どんな時に心を開くのかな？」
```

## 🎨 UI/UX設計

### チャット画面レイアウト
```
┌─────────────────────────┐
│  🧠 キャラメイクAI      │ ← ヘッダー
├─────────────────────────┤
│                         │
│  AI: こんにちは！        │ ← チャット履歴
│      新しいキャラを       │
│      作りましょう♪       │
│                         │
│  User: よろしくお願いします │
│                         │
│  AI: 最初に名前を        │
│      教えてください！     │
│                         │
├─────────────────────────┤
│ [エリカ] [ユイ] [サクラ] │ ← 選択肢ボタン
│ [✏️ 自分で入力する...]  │
├─────────────────────────┤
│ または入力: [        ] [送信] │ ← 自由入力
└─────────────────────────┘
```

### 設定表示サイドバー
```
┌─────────────┐
│ キャラクター設定 │
├─────────────┤
│ 名前: エリカ     │
│ 年齢: 16        │
│ 性格: 人見知り... │
│ 見た目: 茶髪ロング │
│ ギャップ: 実は... │
├─────────────┤
│ [画像生成]      │
│ [設定保存]      │
│ [SNS共有]       │
└─────────────┘
```

## 🔗 SNS機能設計

### 投稿・共有機能
- **キャラクター投稿**: 設定 + AI生成画像のカード形式
- **Twitter連携**: ワンクリックでツイート（画像＋設定抜粋）
- **いいね・コメント**: 他ユーザーとの交流
- **検索・タグ機能**: ジャンル別キャラクター発見

### 投稿カードデザイン
```
┌─────────────────────────┐
│     🎭 エリカ（16歳）    │
│                         │
│  [AI生成画像]           │
│                         │
│ 「人見知りだけど、心を開く │
│  と明るい子。実は格闘技  │
│  の達人というギャップが... │
│                         │
│ 👤 by @username         │
│ ❤️ 42  💬 8  🔄 12      │
│                         │
│ [詳細] [いいね] [共有]   │
└─────────────────────────┘
```

## 🚀 段階的実装計画

### Phase 1: 基本チャット機能（2週間）
- **PostgreSQL環境構築**
- **基本的なチャット型UI**
- **選択肢生成システム**
- **キャラクター設定データベース**

### Phase 2: AI機能強化（2週間）  
- **高度なプロンプトエンジニアリング**
- **ギャップ萌え生成ロジック**
- **パーソナライズ機能**
- **設定の矛盾チェック**

### Phase 3: 画像生成・SNS機能（2週間）
- **DALL-E API連携**
- **Twitter API連携**  
- **いいね・コメント機能**
- **投稿一覧・検索機能**

### Phase 4: 本格運用準備（1週間）
- **パフォーマンス最適化**
- **セキュリティ強化**
- **デプロイ・運用環境構築**

## 💰 将来的な収益化準備

### 技術基盤の構築
- **ユーザー課金管理**: Stripe API連携の準備
- **API使用量追跡**: OpenAI APIコスト管理
- **スケーラビリティ**: PostgreSQLの最適化

### 収益モデルの検討
- **基本機能**: 無料（月5キャラまで）
- **プレミアム**: 月額500円（無制限＋高品質画像）
- **API連携**: 外部SNS自動投稿、高解像度画像

## 📚 習得予定技術

### 新技術習得リスト
1. **PostgreSQL**: 本格的なリレーショナルDB操作
2. **Twitter API**: SNS連携の基礎
3. **画像生成API**: DALL-E、Stable Diffusion
4. **ファイルアップロード**: Cloudinary等
5. **リアルタイム通信**: WebSocket（チャット機能）
6. **JSON型活用**: PostgreSQLでの柔軟なデータ管理

### スキルアップポイント
- **複雑なデータベース設計**: 多対多リレーション
- **API統合管理**: 複数外部サービスの連携
- **ユーザー体験設計**: チャット型UIの最適化
- **パフォーマンス最適化**: 大量データの効率的処理

## 🎯 成功指標

### 技術的成功指標
- [ ] PostgreSQLでの複雑なクエリ操作習得
- [ ] 自然な会話型AIシステムの構築
- [ ] SNS機能の完全実装
- [ ] 画像生成APIの効果的活用

### プロダクト成功指標
- [ ] ユーザーが楽しく長時間利用する体験の実現
- [ ] キャラクター設定の自動生成品質
- [ ] SNS投稿での拡散・反応

### 学習成功指標
- [ ] ストーリー創作ツールに必要な技術基盤の習得
- [ ] 大規模データ管理能力の獲得
- [ ] API連携・プラットフォーム構築スキル

## 🔮 最終目標への接続

このプロジェクトで習得した技術は、最終目標「ストーリー創作補助ツール」で以下のように活用される：

- **PostgreSQL** → 複雑な世界設定・伏線管理データベース
- **チャット型AI** → 物語創作支援インターフェース  
- **SNS機能** → 創作者コミュニティプラットフォーム
- **画像生成** → 設定・キャラクターの視覚化
- **データ関係性管理** → 矛盾のない世界設定構築

## 💡 重要な設計思想

### ユーザー体験重視
- **楽しさ優先**: 友達との妄想時間のような自然さ
- **段階的詳細化**: いきなり複雑にせず、徐々に深掘り
- **創作インスピレーション**: AIが新しい視点を提供

### 技術的柔軟性
- **データの拡張性**: JSON型での柔軟な属性管理
- **API連携基盤**: 将来的な機能拡張に対応
- **スケーラブル設計**: 大量ユーザー・データに対応

### 学習効率最大化
- **段階的実装**: 前回の成功パターンを活用
- **技術の積み上げ**: 既習技術＋新技術の組み合わせ
- **実用性重視**: 最終目標への直結性

---

このプロジェクトを通じて、「AI を活用したSNS型創作支援プラットフォーム」を構築し、最終目標である「ストーリー創作補助ツール」への確固たる技術基盤と創作コミュニティ理解を獲得する。

日本の豊かな創作文化に貢献できるツールの第一歩として、心を込めて開発に取り組む。