# AIクイズ生成アプリ - プロジェクト計画

## プロジェクト概要

**プロジェクト名**: AIクイズ生成アプリ
**期間**: 4日間（基礎固め重視）
**目的**: AI API連携 + ユーザー認証基礎習得 + 最終目標への技術基盤構築

## 学習目標

### 主な習得技術
- JWT認証システム（ユーザー管理）
- OpenAI API連携（AI機能活用）
- bcrypt（パスワードセキュリティ）
- 複雑なデータベース設計（リレーション）
- 環境変数の本格管理（セキュリティ）
- プロンプトエンジニアリング基礎
- 状態管理パターン

### 段階的学習戦略における位置づけ
**最終目標**: ストーリー作成補助ツール
**前回**: レベル2 - データベース基礎学習 ✅
**今回**: レベル2.5 - AI連携 + 認証基礎学習
**次回**: レベル3 - 複雑なデータ管理とAI活用

## 前回プロジェクトからの進化点

### 技術スタックの進化
```
前回（シンプルメモアプリ）:
├── Frontend: バニラJS
├── Backend: Express.js + SQLite
├── データ: 基本的なCRUD
└── デプロイ: Railway（基本）

今回（AIクイズ生成アプリ）:
├── Frontend: バニラJS（状態管理強化）
├── Backend: Express.js + SQLite + JWT + AI API
├── データ: 複雑なリレーション + ユーザー管理
└── デプロイ: Railway（環境変数管理強化）
```

### 習得済みスキルの活用
- **Express.js**: 基本サーバー構築（前回習得済み）
- **SQLite**: データベース基礎操作（前回習得済み）
- **CRUD操作**: データ管理の基本（前回習得済み）
- **Railway デプロイ**: クラウド公開（前回習得済み）
- **Git/GitHub**: バージョン管理（前回習得済み）

## 機能仕様（MVP版）

### 必須機能
- 🔐 **ユーザー認証**: 登録・ログイン・ログアウト
- 🤖 **AIクイズ生成**: トピック指定でクイズ自動作成
- 📝 **クイズ回答**: 4択問題の回答システム
- 📊 **統計表示**: 正答率・履歴表示
- 💾 **データ永続化**: ユーザー情報・クイズ履歴保存

### 除外機能（学習効率優先）
- ソーシャルログイン（Google/Twitter等）
- リアルタイム対戦機能
- 画像・音声問題
- 複雑なUI/UXアニメーション
- 管理者機能
- APIレート制限の高度な管理

## 技術仕様

### 技術スタック
```
Frontend: HTML + CSS + バニラJS（状態管理強化）
Backend: Express.js + JWT + bcrypt + OpenAI API
Database: SQLite + better-sqlite3（リレーション設計）
Deploy: Railway（環境変数管理強化）
```

### ファイル構成
```
ai-quiz-app/
├── server.js              // Express.jsメインサーバー
├── package.json           // 依存関係・起動コマンド
├── .env                   // 環境変数（ローカル用）
├── .nvmrc                 // Node.jsバージョン指定
├── routes/
│   ├── auth.js            // 認証関連API Routes
│   ├── quiz.js            // クイズ関連API Routes
│   └── user.js            // ユーザー関連API Routes
├── database/
│   ├── db.js              // SQLite接続・設定
│   └── schema.sql         // テーブル定義
├── middleware/
│   ├── auth.js            // JWT認証ミドルウェア
│   └── validation.js      // 入力値検証
├── services/
│   ├── openai.js          // OpenAI API連携
│   └── quiz-generator.js  // クイズ生成ロジック
├── public/                // 静的ファイル
│   ├── index.html         // ランディングページ
│   ├── login.html         // ログインページ
│   ├── dashboard.html     // ダッシュボード
│   ├── quiz.html          // クイズページ
│   ├── style.css          // 共通スタイル
│   └── js/
│       ├── auth.js        // 認証関連JS
│       ├── quiz.js        // クイズ機能JS
│       └── dashboard.js   // ダッシュボードJS
├── .gitignore             // 除外ファイル設定
└── README.md              // プロジェクト説明
```

### データベース設計
```sql
-- ユーザーテーブル
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- クイズテーブル
CREATE TABLE quizzes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    topic TEXT NOT NULL,
    question TEXT NOT NULL,
    option_a TEXT NOT NULL,
    option_b TEXT NOT NULL,
    option_c TEXT NOT NULL,
    option_d TEXT NOT NULL,
    correct_answer CHAR(1) NOT NULL,
    difficulty INTEGER DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ユーザー回答履歴テーブル
CREATE TABLE user_answers (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    quiz_id INTEGER NOT NULL,
    selected_answer CHAR(1) NOT NULL,
    is_correct BOOLEAN NOT NULL,
    answered_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id),
    FOREIGN KEY (quiz_id) REFERENCES quizzes (id)
);
```

## 4日間実装計画

### Day 1: 認証システム基盤構築
**時間**: 4-5時間
**タスク**:
- JWT認証システムの理解と実装
- bcryptによるパスワードハッシュ化
- ユーザー登録・ログイン機能
- 認証ミドルウェアの実装
- 基本的なダッシュボード作成

**完了基準**: ユーザー登録・ログインが正常に動作する

**事前学習メモ作成**:
- JWT認証の仕組みと実装方法
- bcryptによるパスワードセキュリティ
- セッション管理とCookie

### Day 2: AI API連携 + クイズ生成機能
**時間**: 4-5時間
**タスク**:
- OpenAI API の設定と連携
- プロンプトエンジニアリング基礎
- クイズ自動生成機能の実装
- 環境変数の適切な管理
- エラーハンドリングの強化

**完了基準**: トピック指定でAIがクイズを生成できる

**事前学習メモ作成**:
- OpenAI API の使用方法
- プロンプトエンジニアリング基礎
- 環境変数のセキュリティ管理
- 外部APIのエラーハンドリング

### Day 3: クイズシステム + 統計機能
**時間**: 4-5時間
**タスク**:
- クイズ回答システムの実装
- 正答率計算機能
- ユーザー統計・履歴表示
- データベースリレーションの活用
- フロントエンド状態管理の改善

**完了基準**: クイズの回答と統計表示が正常に動作する

**事前学習メモ作成**:
- 複雑なデータベース設計（リレーション）
- JavaScriptでの状態管理パターン
- データ可視化の基礎

### Day 4: デプロイ + セキュリティ強化
**時間**: 3-4時間
**タスク**:
- Railway での環境変数設定
- 本番環境デプロイ
- セキュリティ設定の強化
- パフォーマンス最適化
- 最終動作確認とドキュメント作成

**完了基準**: 一般公開URLで全機能が正常に動作する

**事前学習メモ作成**:
- 本番環境での環境変数管理
- Webアプリのセキュリティベストプラクティス
- API利用量とコスト管理

## 学習ポイント

### 技術的学習
1. **JWT認証**: モダンなWeb認証の標準
2. **AI API連携**: 外部サービスとの統合技術
3. **セキュリティ**: パスワード管理とデータ保護
4. **複雑なDB設計**: リレーショナルデータベースの活用
5. **状態管理**: フロントエンドアーキテクチャの改善

### プロジェクト管理学習
1. **段階的開発**: 認証→AI→統計→デプロイの順序立て
2. **セキュリティ重視**: 本格的なWebアプリ開発の注意点
3. **外部依存管理**: API制限とコスト管理
4. **ユーザー体験**: 認証フローの設計

## 成功指標

### 技術面
- [ ] JWT認証システムが正常に動作
- [ ] OpenAI APIとの連携が成功
- [ ] クイズ生成・回答・統計機能が完動
- [ ] Railway デプロイが成功
- [ ] セキュリティが適切に実装されている

### 学習面
- [ ] JWT認証の仕組みを理解
- [ ] AI APIの活用方法をマスター
- [ ] 複雑なデータベース設計を習得
- [ ] セキュリティベストプラクティスを理解

### 公開面
- [ ] 一般ユーザーが安全に利用可能
- [ ] レスポンシブデザインで各デバイス対応
- [ ] ポートフォリオとして活用可能

## 技術仕様詳細

### JWT認証システム
- **トークン管理**: アクセストークン + リフレッシュトークン
- **セキュリティ**: bcryptによるパスワードハッシュ化
- **セッション**: HTTPOnlyクッキーでトークン管理
- **認可**: ルート保護とユーザー権限管理

### OpenAI API連携
- **API選択**: GPT-3.5-turbo（コスト効率重視）
- **プロンプト設計**: 構造化されたクイズ生成指示
- **エラー処理**: レート制限・ネットワークエラー対応
- **コスト管理**: トークン使用量の監視

### データベース設計方針
- **正規化**: 適切なテーブル分割とリレーション
- **インデックス**: クエリパフォーマンスの最適化
- **制約**: データ整合性の保証
- **セキュリティ**: SQLインジェクション対策

## 重要な覚書

### 新しく習得する概念
- **JWT（JSON Web Token）**: ステートレス認証の仕組み
- **bcrypt**: 暗号学的ハッシュ関数
- **プロンプトエンジニアリング**: AI との効果的な対話方法
- **外部API管理**: レート制限・エラーハンドリング・コスト管理
- **複雑な状態管理**: フロントエンドでのデータフロー制御

### セキュリティ重視ポイント
- パスワードの平文保存は絶対禁止
- JWTトークンの適切な管理
- 環境変数でのAPIキー保護
- SQLインジェクション対策の徹底
- XSS攻撃対策の実装

### 学習効率化のポイント
- **事前学習**: 新技術は必ずmemoで予習
- **段階的実装**: 認証→AI→統計の順で積み上げ
- **エラー歓迎**: 失敗を学習機会として活用
- **実用重視**: 動くものを作ることを最優先

## 最終的な成果物イメージ

**アプリケーション**: AIを活用したインタラクティブなクイズアプリ
**GitHub リポジトリ**: 認証とAI連携の実装例として価値の高いコード
**デプロイURL**: 友人・家族が実際に楽しめる公開アプリ
**学習ドキュメント**: 次プロジェクトでも活用できる技術資料
**ポートフォリオ価値**: 現代的な技術スタックを示す作品

このプロジェクトを通じて、「AI を活用したユーザー認証付きWebアプリケーション」を開発し、
最終目標である「ストーリー作成補助ツール」に向けた確固たる技術基盤を構築する。

# 重要な指示

## memoフォルダ活用方針

### 必須：事前解説ファイル作成
新しい技術・概念を実装する前に、必ず以下の解説ファイルをmemo内の適切なフォルダに作成すること：

1. **JWT認証システム解説**
   - 仕組み、実装方法、セキュリティポイント
   - 位置: memo/02-backend/ 

2. **bcryptパスワードハッシュ化解説**
   - 暗号化の仕組み、実装方法、セキュリティ重要性
   - 位置: memo/02-backend/

3. **OpenAI API連携解説**
   - API使用方法、プロンプト設計、エラー処理
   - 位置: memo/04-deployment/

4. **プロンプトエンジニアリング基礎解説**
   - 効果的なプロンプト作成方法、クイズ生成特化
   - 位置: memo/01-fundamentals/

5. **環境変数セキュリティ管理解説**
   - 本番環境でのAPIキー管理、セキュリティベストプラクティス
   - 位置: memo/04-deployment/

6. **複雑なデータベース設計解説**
   - リレーション設計、外部キー、JOIN操作
   - 位置: memo/02-backend/

7. **フロントエンド状態管理解説**
   - 認証状態管理、ページ間データ受け渡し
   - 位置: memo/03-frontend/

### 解説ファイルの条件
- 高校生にもわかりやすい身近な例での説明
- 実装前の概念理解を重視
- トラブルシューティングポイントも含める
- 図解や具体例を豊富に使用

### 実装の流れ
1. 新技術の解説ファイル作成
2. 解説内容の確認・理解
3. 実際のコード実装
4. 動作確認・デバッグ
5. 学習振り返りの記録

この方針により、理解を深めながら確実にスキルアップを図る。